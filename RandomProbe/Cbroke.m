function [Y,Xf,Af] = Cbroke(X,~,~)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Auto-generated by MATLAB, 10-Jul-2021 13:33:51.
%
% [Y] = myNeuralNetworkFunction(X,~,~) takes these arguments:
%
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = Qx6 matrix, input #1 at timestep ts.
%
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = Qx2 matrix, output #1 at timestep ts.
%
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-5.99999999821921;-1.99999999999091;-2.99999999970828;-3.49999999926808;-3.49999999999784;-3.99999997925516];
x1_step1.gain = [0.0869565217579614;0.100000000000177;0.10810810811711;0.0597014925417567;0.0621733573259006;0.051282051310581];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.6292623591061730082;-3.0786292884977370932;-1.1058275654057667658;-3.0768755041986097787;2.7759509524571779338;-2.7729831069848351888;-0.35279122767821358142;-2.6346208855134540805;-3.9557605347244226834;2.4413958488659761592;-2.5630699837741408587;1.9945076879766003852;-2.8305447732336945776;-2.41537188636820499;4.5430787961209864179;-2.8912118772308064152;-1.9784022545286841233;-2.4037181715308046925;-2.7525677797411107761;0.26348341081836379463;-2.0611544891740978258;4.2921978920681569392;1.1646252559953491623;-1.1766573173216952064;4.2495676936120698741;1.4526391367883690897;0.69804485545533034863;1.3865484533663101629;0.086657233342614631288;1.642783312572761556;-7.1865134106602592823;3.140680387658178585;1.7674675026421864388;-0.10261107577699242477;-1.3813636413237859735;0.71676028378014944309;2.6272809623688342384;-2.591742862233140432;0.073843698516436254153;-0.46260733274177989749;0.59984637887545855239;-0.02096721110050263695;-3.7847518446615664445;0.49526498158991755227;-2.4999926772816709608;8.5314782393698536112;1.4598409965971481661;-2.1187199171073745063;-2.6013346314438621221;-0.7857405079401762471;0.26085070807026000672;-1.4015948364579622343;2.1502488478212358203;0.71946276667976261088;-0.84177519911417897358;-2.3555592068364918923;2.7911785878029395924;-0.23871153091709970684;0.63900652218418751982;3.2558936443552823903;-0.62673612101179010381;-4.3169319369908372153;-2.275189101227615307;-0.47807354246886740734;-1.2833310784232381252;-1.2628620645577588455;-0.17947185383413410964;-0.33930763257237978037;0.92966073416315997413;-0.29311030989386588352;-6.796787333834526379;-6.3339883380714354644;-1.529363972912918479;-0.9160888290715188953;-2.6948756749567945867;-0.91336275445117676153;3.3625242427444472781;1.5946964127953757728;4.1535424032953542905;1.0096382555508518486;0.1264734960915655515;-4.4041846496133167932;-3.1371593951738820927;0.082151845087282335256;-2.0475091075983660183;2.1337263028496336048;2.2522262036857165768;-1.6892280360486184865;-12.046623826712922423;1.0376153515104342695;1.8867747876115281702;-2.7232264813907733902;-4.3191214486762223856;3.2484694532779432308;1.4002037981489556806;3.372459800957282372;2.8736751306757946089;-3.8039787331221384115;3.6010378079703673215;2.1783738780437995608];
IW1_1 = [1.7311122071563065372 0.74346119440358016117 -1.5384247712135983299 -2.3302753663249808902 -0.17158293983043196307 2.5989067720563889807;0.74340994980268715331 0.5397968213963205697 0.11722946363360881028 1.1214027389449501282 0.22711878044974462276 2.5773228299812527275;0.68274573357136791874 0.66969852455068290542 1.0027545130552668606 -2.720174157261946668 -1.1023994536300321112 3.1681448786523764838;1.4860122574503751292 0.051211888699677493575 -1.7077364990379624299 0.63551110673890354175 0.84470580021169616725 1.5369669537329615494;-0.70128986992194786154 -0.97206770526795249765 -2.2691289365121365407 -0.29524390437724851166 -1.2445283705578826794 -0.9371768644885634103;0.62548749386548430085 -0.680833559559042234 2.0261095712629759724 -0.75365490514068922412 0.20779320336803902558 -0.69521055954948085542;0.2911081224985167526 0.31698546355620871307 0.19697103137780980209 1.446302518857189634 -5.6962346942102319858 3.1349333763205544656;0.96336548041694036737 1.2321060637563894247 1.4594633727227166453 0.37293569047237123959 -1.2945035963694531134 1.6206465424782652285;-0.31284765055563418246 -2.9333252399881812877 0.046243140849917971358 0.43609228810736283544 -5.505820519894034426 2.0994008386533069555;0.76027750250267134291 -0.17017957011386711241 1.7372879116361161778 -1.3665756381438749489 -0.53624270988258038173 0.84977302819267430678;0.53084535712013891651 1.3018810588672211637 0.6265065898142799794 -0.59111182287135888291 1.5002468633180416901 1.992064999642449763;-4.5717001746316174859 -2.1473443583392985978 2.6989945538540278669 2.5543882382440039613 0.16091539236657353973 -0.50781044349875570365;2.4847763095842352321 -0.78430125127517180683 2.650345290353062655 0.55201367920316724014 1.1985604195165406871 -0.11907987866576133507;1.4631257110024149526 1.6592668461719781714 0.12975834552551021583 1.2424065005584614685 -1.4827668343308400001 0.17270529099960676978;-3.9938091413385699013 -0.098901749899708776836 3.7653249192987101601 1.7509356497289305654 6.37052407564187817 -2.826976835981354963;-0.20569501918110885685 -1.9138404238551895986 0.11803449633888926651 -0.22445381323941279716 1.3428978620269058641 -2.6141024245486867983;2.5609073964222259789 -0.46756300438415182574 0.39036658774647881032 0.58462441889049165944 1.6174509146859470388 0.57976254464040943848;2.1105500902520937245 -1.5088695189935044105 2.6598206847151755206 1.2677503298261858511 -0.60309913285187899401 0.65704717741898066574;1.2841850898731275166 1.7174266985817077114 -0.61129021421279483572 0.72386751531807802529 -0.15830425332051328846 0.29498079870586257911;1.0418277814382141955 -3.6037860844257298965 -3.5842175761375831833 0.92136272929461848769 0.99438917485922173611 2.0608238923039441381;1.6797015258348868549 1.9342801837112073571 0.77990332445799792627 0.98232621076801185378 -1.9268296702502194506 -1.1435503053746880475;0.061199537389172234403 0.0053572120311936952813 0.23094601078312626541 -0.19721960304791200103 7.7048619929018080654 -1.4810562874238377695;2.0591617730095097549 3.4181722237606990689 -0.34469280215751596508 -1.7756477936239718485 0.92262656445357049684 -1.2301014761167983202;0.37298978695531592731 -3.212871649305715227 -1.0470817918591950324 1.2289255023478049544 1.0555477528946082266 1.7322308238338850472;0.28809164088722993835 4.5085538938133602471 0.27711791705463312274 -0.060613784795349845425 0.57763581446668932351 -1.0883867113772061064;0.6015552802879544636 0.75416615281232224355 -1.7839567957790380959 -2.3458521577086317578 -0.68125411011148062634 0.74619345115062696294;0.92003195705277218686 -1.7799886815582910415 -2.1469845892394374687 0.048418657674624443477 1.6492540583103698637 1.2494223101143633325;-1.5550390111237812896 -2.0658644150780500759 1.6436818332272085108 0.26444065649726272715 -1.315607378989097187 0.55328497260229847488;1.3430396255047400977 -1.7443763473846347622 -1.1111628378095190772 1.1405139098183114665 -1.0371007087469483743 2.3901578175033901807;-0.64781815120148600329 0.079500219121932544364 0.6006372869455847141 -0.73566072136855598096 -1.8972525591154971725 -1.6981274751588109062;0.80540846951120748098 0.74780995201151378993 0.8934717418000445166 0.034649745260350653386 -4.8407085220107468615 -5.0723583130248783846;-2.0072117884467917115 4.0221018793532454794 0.50037209677145222386 -0.70907379200013187504 2.1321143259508006373 1.6862750305999432143;-2.4600461788034291288 2.5956079504372686628 -1.4663148315890250917 -0.69199337520872306051 1.3851957815888926717 -2.4487120047195563011;-1.0931177271227514591 0.52717173870875821962 -0.56834550029526331727 2.9749011107599279136 -0.38214937032852219767 0.86894740627206212835;-0.95513166269233340522 1.3590334384499278553 1.3370277487084298862 -2.3371031980667598127 0.32878839186128810956 1.5844125646857958323;-1.3916756701027026555 -1.5427809932959537509 0.89842510733251734756 -2.2834030919231049772 0.40089917145932396636 -0.61086840305318013122;-0.11488516482203166291 -1.8039698129127141879 -1.0171333309615295803 7.4272912814760738698 -0.091579806816492234645 -0.45771461366473104038;-0.53271634748670071424 -0.47555680971463265561 -0.758281122134077612 2.1158316774372520896 0.35606034764632299439 -1.6631302051059262403;-1.5553112387010936679 -3.2155475563878481715 0.23722413014708987333 1.7970669454741701188 0.49852814233578118808 1.3436482052489735484;-1.9628847210774398313 -0.86041266392909432348 4.1196735152337389252 -0.074222989658026844451 -0.42623306172097674693 -2.7126934692014823547;-1.2390390273887275097 -1.2766589501680911667 -0.92603456365643310733 -1.638807529534363594 -0.46851097700727895035 -1.5100154025220926535;-4.2005344631651819753 0.46226744430061500468 0.21517160400810136922 -2.2045784708984315081 -1.4543442783102156213 1.1989682810267485724;-1.9737592204494407433 -2.1863279648656366305 1.7162265199418997863 -2.6280549428836068593 0.89349750125172899828 -1.673492562082006474;-1.0095980496177163754 -0.097704507261479223157 -0.54604971674023583539 1.6944973776967422463 -1.9768545899116061193 -0.037368763946448460556;-0.69114440485238382017 -4.9149102779675848396 0.39218056026823383542 1.1499784434990154569 -2.1668333291351542513 0.19649719038642923796;0.0012063494290584664964 -0.14159778360416222509 0.11898563602427304764 0.52766201029963455404 0.1986331334549898131 10.485140398842908382;-0.50327521169861766381 -0.97975878482752531973 -5.5849292778189347786 6.4280848583160556942 1.8960247932006106808 -0.95373734993801950743;-1.1293266493391478367 -3.9198004554754444229 -1.3322477104130072689 -2.1045736521349094339 3.4796923638680201663 1.6018179402303165393;0.061676395255252827732 -3.9704586713844127743 -1.7088785097914374056 -1.2366818424757133332 -1.9159300172092814663 -0.54912964406992026412;-1.5634427531264183386 -0.55989051049365345936 0.19582706458909146519 -0.14778573744810896695 1.8265520721939159099 1.3439779055040881328;-1.5968834066188601906 -0.7105896560339728385 4.5656436629191015086 0.017524660250542455769 -0.040505050528822993117 -2.5728112839473231688;1.6716939056486177506 -2.6596030243164152651 -1.5983834977154862678 0.5035689244397414388 2.4024125539081282454 -1.8379418723335885222;0.41525073436182807773 -4.7300208034700963466 0.089375129962287136465 3.347591762925660408 2.9902222589233771188 1.2956616335061976741;0.81725228114407866276 3.6923447347854572165 1.810997493054520513 -2.4305352516959883857 -2.8039121261760948656 0.84746947266207273142;0.43648503183733594613 -0.25569728981459782791 2.2499249539499808215 0.81389934054062629265 -0.720839182123349409 -1.2274154806495429781;-0.86816987071473017412 1.8031400751138915162 -1.5720282028045724498 -1.8627231238997119522 -1.0595902271223658353 -1.8658326040468065088;11.379316370472366771 -0.37377292638687387161 -2.5705945224404773697 -0.085857347711000731039 -0.48086002077740219729 0.3603081369151783786;-0.44551568300649208032 -2.7679810499468708862 -0.98287958290845889309 -0.92187632747597880734 -0.074829686130918060538 -1.229078794979962419;1.8947221391477115926 0.30534924351052133984 0.21000305661442109084 0.94780076987002892519 1.9436877185804044554 -1.5749879815817919848;-0.73941466098601038581 3.0194507339164795567 1.352071406342141735 0.85766233532516611415 1.480959194676943147 0.77682819981411632693;3.2851652313514025927 0.10951953032183242565 0.22010771587707628205 1.7379537009142242976 1.5551102999239747593 -0.21269293793932189662;0.27235997037023074174 -1.212706882262471364 0.28019076277453885959 -0.21585792614222548691 -4.0290974524428069259 -0.62469549065329732507;0.14122063709379917285 0.86319319130828009445 5.1385589954075872043 -6.7747749185211674217 -2.1830489155490000464 0.72518570119560743503;-0.53780653921837373588 0.979714647923414228 -0.32283868090470713152 1.7984196277810011733 -0.18370633752656423399 2.6074370424873047902;0.46606777871523352719 -2.9825702434268901442 0.39153009319530812649 0.024776345314289009714 2.111327529765109734 -1.272302357599238265;-1.9882976843347732743 1.3073840324711836214 0.7670000972467031497 -0.26022012210001693733 1.1805446159116586013 -1.4264200829879600807;-0.47564469193955333237 -0.79409870763621093204 -0.61334250221922836932 -0.65538270255120023577 7.5376813305966887668 -4.943375722105010972;3.7919335934502025331 -0.38425636054041895084 -2.7129769385209887567 -0.43641857200876565948 -0.7447192560741132672 0.18887199350240935214;7.2435414164610927301 -0.76017016886536514786 -2.1277465653542440016 -0.22816363033826347895 -0.50992585426790215664 0.018320918911619833713;-0.34129275473797632268 0.28443373041657471489 -0.68626886127970820883 -2.5808604147502016701 -1.0127674738664618204 -1.6196786411157351182;-2.1240581199318557815 -5.011793860867959971 0.20071568129379424583 -0.91254678831900370994 -1.5483853251576242815 -0.74995333406543451815;-6.401306357581876938 -1.1000991121897034652 -2.1348888881264072026 -0.66420943396540343961 -0.35745188759590790228 -0.25337404638828009418;-1.1055655487579509888 2.3835371742656601413 -5.2634996808249185918 -1.1513141712438477171 -0.65542475113091080985 0.15286880645375952592;-0.30490518648516262701 4.2564653564586691914 -0.072198481391677032937 -1.5280357552649341812 -4.5614536417392868017 0.28049587846380447109;0.62811844019873741551 3.1485136225941392496 0.43801480478184773304 -2.5782251133097662255 -3.9327051860713471143 -1.4223690798479806663;0.097481429967177027351 2.3298730295731138185 -0.73553936816411824573 0.4635383473634188678 -1.4556169789960031746 1.3709294725718375041;0.30702077055395310401 -0.17773486035900160074 -2.7361213002445943232 3.9947960510586102423 0.93012806241395351581 1.9520737895892739111;0.063565895553140863705 -0.92344884816969352581 0.30403286927547878982 -2.6049971573066303954 -1.2428655517357436455 -0.28812277764140836744;-0.17273378087485499743 6.5330449287787724089 0.99396485507676524129 0.95463865960875893268 0.41499053506513733369 -1.167744807787657102;1.3266852915761753184 2.6301950741882862417 -1.3495573441404997705 -3.1316142004498912499 -1.7537088747711320202 -1.0277766174275184685;1.5929742396732673448 0.074225161077142207122 -1.23021075438344063 1.1422697364302976109 -2.6339011235724032467 1.5968220338013199289;-4.7309824901952870491 -0.9457893287622043399 -1.6272548046540711297 -0.20593274026577457203 -0.049060041425871697696 0.29423629450001315133;-0.67816414805357450035 2.0378524953791101737 1.5106106157946328494 1.4844146169886525133 0.42285167385679178764 -1.5424493451317189407;-0.80200679842599920111 4.1368214386537243143 -0.89410294724013550383 3.7340977123011471761 -0.59541906644547670791 -2.6897622576189412769;-0.96382818142505377601 1.0187439839379357487 -0.51609034263304531809 0.19076083361267576199 1.0670588564244001262 -2.802993570090454245;-0.099200452454544021941 2.1202123318780681238 2.3914759014720985419 -4.4503337210822593306 1.4022981694895200189 0.1923899871549451801;1.3895984780645596057 -0.34823873497252660902 -1.5595837146235043136 -1.1847641625260723064 -1.1403338875741220182 -1.4097505122306437375;-2.2050805173445762186 -2.0479577091590681626 -1.9066581429214009002 2.7791823698697162293 -1.098648629644668695 -1.2222096361392955632;0.48384205143383041126 0.5911592319889769076 0.32957835828173470683 0.18439441537051004527 -6.5930727915141389417 -8.776735946696600621;3.5718371880364574444 -1.4333841173377339651 -2.107275177268503441 -0.73730125861683115662 -2.211951617963990202 -3.8860768117623036844;2.7553042884121623501 -0.44957326920868756481 -0.45591952172602806526 -0.49533573209399706094 -0.7284281594878234678 0.98127368634623113319;-0.010047141109131274214 1.4854791375056357605 0.7149740042997524414 1.4558959432697577974 -1.1926656359035818777 1.2340444328397035534;-1.2722205388692824357 -0.8519097232676252629 -3.6836147868841493391 -1.2201921637718400326 0.23196137382198822596 -0.56841465367641041961;-1.4875176315625244783 3.0911074530570052943 -1.149331606452681509 -0.10647599192100407062 0.57262038289606365105 1.5160721490272073275;-1.2290367545785023662 -1.7840602790092721097 -1.2887438924062819545 2.4198582974851157168 -0.75321177447643417047 1.6482571580867684258;-0.44594939998921440116 0.2238899984951275568 1.268522630595454892 -0.10608379923262171995 -2.2476686682535964579 -2.2550027183293352984;0.99901122927551799791 -1.0096153218164383158 -1.7391156580948539112 -0.38852791898541577664 -0.92971285775558187847 -1.7196967576987280957;0.23695416768845720124 0.67298378497052624425 0.39469296105004586517 -0.28956196647846954573 -10.1521133912830539 3.0860503765961180278;0.42468268485846299987 -0.76810359690300322733 -5.4085261313289922924 8.2724611572067594523 2.7978130594858030555 -0.81301964805172166617;0.61627619320172644102 -1.2896423432079224813 -1.639529866862105445 2.4397196112682184577 -2.4548590245046524316 -0.14082184047530232895];

% Layer 2
b2 = [0.18134816083182417334;1.0120413460305381914];
LW2_1 = [-0.43017044500043766231 -0.68804308721547347005 0.31083611588633225375 0.6080958565505009128 0.41286317767209440577 0.96262691272450817692 0.21353052753390569518 0.86203279315073888522 -0.80534065744196425829 0.53287199225816272996 0.0021687974620293163676 0.2541563864591559474 0.52633865309580196712 0.5897290547353833956 -0.017859600097268772678 0.070587266423006736482 0.22205807094324478412 -0.51570006768409104581 0.47785029482337854079 -0.35772865140591053601 1.1326619991335533655 0.26386650685648949111 2.0551573405491296853 0.68632307648067936157 2.0450716999655158546 0.0038376609118472709836 1.476496816881518459 -1.4642533147486673784 0.76710295334532507816 0.31370392549587738928 -1.6078931718926126049 0.64390809234568313624 -0.65061576771990281554 -0.40387461176154748621 -1.0132210783207740157 0.67440030259520511446 0.12958810595957800937 0.66808796863991670723 1.6995432013157878437 -1.4410871154341868827 0.072704678256958490956 -0.27532741791813969412 -1.3401162192339741708 -0.67601184784700962815 1.0265092641492283843 -0.30199170235305755616 0.20421426248112831137 0.50955259902595129162 0.23920240218294519519 1.5542833316246777997 1.0063554572950208499 -1.0691451447615241133 -0.34449991499845200593 -0.28705215806112938104 1.3343014070727474696 0.30876997117213678123 -2.3288801777548742145 1.1032841818274483625 -1.0380035844985870952 0.65648995877067783944 -0.67847569975439614431 1.956592835401750996 0.22267737073568683037 1.1664538961370016779 0.75796384005921801919 -1.7652639703183645725 -0.43588450158964908709 -1.585688827397455869 3.5738437189510428027 0.28565296787334509832 1.497009936804277741 2.4738686483125662541 0.34754327659872236156 0.1020977532077447375 -0.031360129870355669957 1.2247108714956511655 -1.1283791333510764243 1.448264515122023699 0.62545709445592101439 -0.012758864887345299638 -0.64438685188387623271 -2.7278234930119014123 0.58532674586574895415 0.031658872844558802462 0.85640988162169262576 -0.15523305660393468819 0.14545596902264298911 0.4641296832509713699 0.54950420484767692475 0.96688677626027186296 0.56080867783745269595 0.27106594784931531406 -1.0252149574192885861 0.94716736983302396435 -0.29827704967963220017 0.2985277356648158853 0.030075003014208387397 -0.091045645850411777156 0.32277394936080611165 0.86512581837543733876;0.15448673756565856063 -0.30303482575748119654 -0.76929277715941113414 0.07415385280205488705 0.05668154486750590082 1.0158818038734120925 -3.2348638431653253811 0.044631848111801236678 -0.17989372185712199093 -1.5140372338371319572 0.87511140248842500533 -0.14324309064827400739 0.81460129495578326164 -0.14266388089572856757 -0.41294096180385703176 -1.8276238924289653909 0.86619021812663965498 -1.2158573549906697142 0.83695289048331378279 0.082359799209769213313 -0.21108381690870933745 -3.0000159298752220316 0.11494236425503705223 -1.2072734801221673973 -0.70550260542381426632 1.1612186702013755912 -0.9155069882645368029 0.96517753364708880337 0.63561487719927589612 -0.22476077369504926518 2.6329999113237732011 0.058913233076826852785 -0.25551616303732405111 -0.19951011623402414852 -1.0640137742973234669 1.1179022749602818276 0.49661685031686481073 0.71872118085132696841 0.19901846202443254641 -1.7910941330415346417 0.64340299480758866846 -0.16875579067644003173 -0.18675520175216209218 -1.6412761446797035081 0.068443691279178556219 -1.2998436688750212298 2.3327985037826186598 -0.49767437974647771304 -0.57176118722280522277 0.1483334485508869538 1.7485814780042505667 0.04804847990513016337 -0.87780222147384290299 0.30977693194786248831 -1.1470385647501049053 -0.68077654158007183671 -0.076008965776646633672 -1.7824537209813460237 -0.98055406556716573352 0.29888536875232379897 0.56547222090799387217 -0.049551861359971666188 4.7725275012172740929 -0.64189158948360058865 2.3041786856480666046 1.1271564376600149426 -2.7457964028669126222 -0.080244272682145123543 0.29992477857347721315 -1.2227202954808167323 -0.079941168378633797875 -0.90135681971199077545 -0.090244904782868923254 0.88594869905261064424 -1.4490487356254682094 0.22432803874636553232 0.29609119448116744122 0.94408837530277700534 0.01190186910847992191 -1.0678513507789286763 -1.3359538533153942907 1.7249277027191132206 -1.1519292640569664954 0.18168151821730471607 -1.4807247623302632888 -0.57971506740489597842 0.48378558231309531923 -0.53292803636884444884 -2.2607070678911895811 -0.091226680578323671167 1.8737852775401526717 -0.004124595789790183771 0.33444902188099773221 0.89131997467657519962 2.0731430931148646657 0.73574063915429122051 -0.56228297981933161864 -2.5978837155782303903 2.1363230454473964848 -0.591130852299105225];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.0800179867671238;0.0800693078139255];
y1_step1.xoffset = [10.0023466511294;10.0173190070803];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
    X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},1); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS
    
    % Input 1
    X{1,ts} = X{1,ts}';
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
    Y{1,ts} = Y{1,ts}';
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
    Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end
