function [Y,Xf,Af] = Dbroke(X,~,~)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Auto-generated by MATLAB, 10-Jul-2021 13:32:52.
%
% [Y] = myNeuralNetworkFunction(X,~,~) takes these arguments:
%
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = Qx6 matrix, input #1 at timestep ts.
%
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = Qx2 matrix, output #1 at timestep ts.
%
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-7.49999999999966;-10.9999999999998;-7.49999999999704;-14.4999999999998;-21.0000000000005;-14.0000000008844];
x1_step1.gain = [0.0769230769230759;0.0701754385964923;0.0578853975354482;0.0701754385964935;0.064516129032259;0.0597014925413787];
x1_step1.ymin = -1;

% Layer 1
b1 = [4.2268498491994739297;2.7680684982550789464;-3.067995529771592178;-3.1384668930007215693;2.3146858976569406607;-2.6565614437084410504;3.8495990407997240368;-2.6403770312797356645;3.0279211269322430233;-2.632811374810009486;-2.5617257896403500261;-2.2397217988367081887;2.0027126039062590479;-2.3381492497886413595;-1.7407128461041410095;2.1325107686264201945;2.2365887569646765165;1.9013304170234666124;-1.6442736304264622405;2.5610982294377464541;1.7725525010376457224;-0.38136852600210136011;2.0098774879474992083;-2.2990948494040459593;0.60627207887992384805;1.1526275349331558395;-1.0084130993097681905;0.36140120367532746481;-2.2034028773953737712;1.3897335758934088457;1.3057441871300943248;-2.1045883162928316068;-1.5774573596393859365;0.82619865701423933491;1.3404262813110796593;-1.508412201997201274;-0.84497701655535151222;1.1934581699474213767;-1.6135881495957820064;-0.67241218317071826949;1.2672854929304722127;2.0954674069292611449;-0.68850625697384282287;-0.23053441563102056167;-0.60765325748147103191;-0.87858717940105468536;-2.4575084947756757892;-1.826585364264917688;-0.026166731936135320669;-0.69973530195383670804;-3.4216750891705856041;-0.13472287408389826968;2.1061171990692555411;-0.76781669006654518217;-0.91251811779459079954;1.3946913931235556117;3.3335232022062726287;0.17089513614804704988;-2.3593347958278161336;-0.13486186366477215248;-1.5139260938710470406;0.55052245658286769192;-0.84248494215645608474;-0.97450508168265226328;-0.77992328712314873407;-0.62216657264636743285;2.6302773201821270099;-0.47472267296340431297;1.3024012309616943561;1.0025173966032643325;1.52300347321059526;1.4471481900206148996;1.7447929574342713188;-0.95311819413086984465;3.5695550457373981246;-2.0187268453485387454;-1.2823170087842432618;1.1663154939475979255;-2.8566043227645137037;2.2364922316065025676;-3.3391310123394495335;1.0112708752341419416;-2.3177074608021159818;2.332950567449517898;-3.0965867924534502542;0.70537695410603029611;3.1365106413604593172;3.3984252130634611255;-1.1989898660734938929;-2.0530404078453940997;2.854626726719189822;-1.180139564542210362;-3.7631118800007503644;1.9877760558721857542;-0.78624729352363742496;-2.0292273691006514902;-2.6819049962004704035;2.6480627655154136413;2.9397161806877614154;-1.06167902116318702];
IW1_1 = [-0.40785171588421048616 1.3529485759255097665 4.0202366973037779729 -0.33991827678077896069 -2.7655695718714206066 -0.47061655064467422527;-1.7653811008772890556 -2.2460776465771168375 -0.39890422484463422537 -0.398443274410224757 -0.57811072480180480948 -0.92840786872766078996;-0.54110177579531870684 -3.4306735234899399245 -0.36751618876055136553 -1.6844013252125336066 0.21518553541373969251 0.95303331007561520316;1.3411401669158251604 0.61740366815731562156 0.89546085748001136295 1.2663354061227232172 -1.7839199212692693486 0.69208001998534263155;-1.6984374963384332169 0.33434373025181629568 0.54490781980637947868 0.53564561015251399567 -2.0913428418110160401 -2.1160879685988893684;0.59857533706422882958 2.2459141663400346012 1.0525480890217062679 1.7543824386046185104 -0.5108409530460387149 -1.0814156969918846674;-0.76619523697552760488 -1.4519071270643877369 7.420904649787959606 -1.540208585886303494 -1.2422402479089560412 -0.0062198602989216034143;1.8185346652691554148 1.5820483302195058606 0.76091687529262630463 -0.41998669415984157816 0.65783113962590300527 1.4674003325524542785;-1.331919987728517496 3.2165598676348050589 0.54671702426470858427 3.2492666146521083093 -1.5441596872235727744 2.4627481680505947104;1.3396894831771908319 -1.0865577830471615517 0.63758334425722396066 1.7107666069380780272 1.0849713446882971457 1.3732708382692724314;1.0633949723725739656 1.0716050400184773395 0.57385556503716927956 -0.77650518814144853241 3.4426419565910029164 -0.91519505870321438135;1.7752396478667678004 0.65210130292140444652 -2.1813985592072180353 -0.14585566096467811326 -0.34367158432449462779 0.38728998784410467726;-1.0240226896047102123 -0.61288108011626896143 0.70604511708228723244 3.1322985534412923769 -0.32011583552920130913 -0.41986202283877055441;1.7733448627383034957 1.1876238712605733383 -1.574446402603690176 1.7324599775429152526 1.0980363975056928183 -1.3256476395991574346;2.5308614194330387726 -3.101664594307803835 -0.64834824226785092716 -2.2542608712555360917 -0.21522175185737013603 1.9508630299754301518;-3.0642650357191074662 0.75701274874704849172 1.0256994764673077469 -1.4231910306923793996 -2.4243474267600686467 0.95299188650609512052;-1.7302488918150085162 -0.019864365664758742991 0.86089311039386173796 -0.011047918060411958743 1.3061311342205090824 -1.8899513684719784212;-1.770414124421479718 1.477310090356157346 -0.67791516831644749175 0.43341589342996705847 -1.8030510632438272456 1.7729933309517647011;-0.40501941594321860807 0.3366131943683061678 0.99047189219034015295 -1.5159758858734073694 1.2233194996510077246 -1.6315835000818919021;-0.7137065912529565459 1.5013151632301020566 1.9042168288939611553 0.68423690548212323659 -1.0478513352637304212 -0.92451793385424396732;-0.9114220658953589016 -1.0363718185533552507 -1.5881122769313755771 0.65004436247663155424 1.8891310995076464607 1.3128653508947589756;2.6911603744521315207 -1.1310431909979465903 1.2733876921394864379 -3.1230451437395054803 -0.96399653220164116529 -1.6412697455566653826;-0.96783193129218447748 -1.8682114014505488697 -1.4214398326128505623 -0.014410058886579193635 0.059814364314632148534 -1.5935134812923019698;1.2574595773042709368 0.91413537393731303382 -2.2527986989897241799 -6.1796699369491490117 0.18319581740409110471 -0.18304415612618168963;-1.1076359606726171592 1.1041985383295807033 -1.2932899590170272575 -1.558090271072185562 -0.64587020435473996294 -2.1872843249855415948;-0.82090321930133380857 0.12791311766569107844 1.5842268902946976539 -2.3142351949774986331 0.50604329945454373796 0.76141119046797867131;0.86157616452933460938 -1.5724931073690535666 3.2314215382895898898 -0.36120426246295544992 0.14838230442185362801 -1.5909939413408560327;-2.3534876892593121767 -1.5569610940551477096 -0.95300305865688450524 0.071471905564578788739 -0.91754927097126304236 -0.22280375105373251277;0.82509248057630502071 0.94668540574382509245 -1.2743553380078849191 -1.3513393143793632767 -0.26320602507574031304 -5.1844116580328662991;0.98190204525820978798 -0.71868564830522319031 -1.771810646497197439 -4.7330465106931409736 -3.2278905007221871948 1.2048574847707835822;-2.3598616885684662314 -0.71837698449545706048 -1.7066092504029970467 0.015281976928261442605 -1.1752173885654997321 1.3274271592763926542;0.68928716332852479898 -1.0338363335084777006 0.57303661075921363821 -0.94566171145869160064 3.2809483652173776491 -5.097928883931433397;0.42278135347030376678 1.4115993951179772736 1.8894977306174931542 0.65401028725940346664 0.78529154740567530535 -0.9618129541048381359;-1.7261222726784231085 -1.0485017081183236609 -1.7710299960096946847 1.6151536309204757025 -2.1368717294848917909 -0.32137728370727741689;-0.71805746885165944171 0.28348235655475539918 -0.48866197933163829648 1.4863765528063879184 1.4460830718461410438 2.532663776287619406;1.1583783090950332539 -0.7846825400186490107 0.58757046092241649315 2.1625163077893270192 -0.99736673122878261033 -1.7064018694522526953;-3.0727586596733926783 0.61560477611355535199 -2.326468391158279303 4.6098637733652942927 -0.02471422375808898439 0.55840801239471282713;-1.9496549881004527904 0.47236725007837004897 -1.0040923994690791332 -1.2910473371475295057 1.1402753378216441416 -0.025979002334582938782;-1.6522791718549885154 -0.89870348310162151417 -2.1773206831126641347 4.8209950912946251123 -3.0427958415187563723 -0.79918969401409478692;0.33790835348307279862 -2.345961203056436517 1.0246099188988162521 0.95695276093367542813 -1.5207282826372974238 0.84595277999324069995;3.0116873146465716893 0.90974222547753103019 0.31608791184348999925 -1.1714811151191322214 0.21888812538830096366 1.5886831067234055137;-0.58876580054105209783 -0.5790629940899542083 -1.4959055376537211401 1.2431715326708827618 -8.5226379281350439499 1.0266924447839052004;0.83248417248627459841 -0.89774332873051942983 1.2806784024168458291 2.4231194435079044247 -0.17924261078560921323 0.28275263427293706453;1.2309961972071830072 0.18757802057604444634 -2.8132621668464938836 -3.948709183499605313 0.6343271490681813285 0.68729334932011620918;3.9226681852827876007 3.6424627412502355028 -3.2117185241695151987 4.1086502265683915169 0.22082883960019938918 0.66865163200006927369;-4.3782435693533976462 0.5526986157871154326 -1.2003122171289324349 0.33324878813269664946 -0.91750500533711831785 1.1002499550831190689;1.5685766652243509078 -0.82759625689783078428 -4.2054191473816544544 -5.9287029174003542664 -4.6513143274429413765 -4.8242147937769921384;-1.958565626780806701 2.0011183398561409597 -5.6396206634158252413 0.10284032648309945901 -2.4454682417326232269 0.39845300967536556591;-0.026446951044792617325 0.3724891857685985741 -0.21424687039217571449 -0.92456587896662190129 3.1538857066737673307 0.13304549845935062513;-1.8143807756647156726 1.660820992308369437 -1.5446387640834700061 -0.342218371247872577 -3.2815680565860896323 -1.7294036166400388321;-8.6929716045455496243 2.1955159083320374691 0.55711236943593389626 1.9641308692533092639 0.11256511789279542712 -1.1495463884191696735;1.0831962805586938803 -1.3251061570526583289 0.9040293939034010906 6.219903774692041587 1.3636374713499206379 0.6141234207032877368;-1.2506703150979299188 -5.9230652831092935884 6.3941990241407440365 -1.5329972447929356427 0.42502260234849703613 0.44350315116376703983;-0.23042191100510128754 0.10264325588025058344 -1.1157701745696229079 -2.3138042469138784263 2.8827163049099575609 0.23711884990680753837;1.2723479609363199661 -0.81092255026494619585 -3.6051723260882853062 -0.30053584542874517416 1.0037061596147782705 1.2629380080719658785;1.4303052348477782729 0.85485305575167158665 1.4576505695408679131 -0.34533927522425039713 -3.4816678944337984269 0.64050423870082295874;9.3586747953125133392 -1.7346281380025097008 0.62185356533471547458 0.4412498997764859876 -0.84200973982471272183 -1.3326209406381874789;-1.1083733401424717968 -0.69841554613362366588 0.79625852697474708286 1.2218226870338255718 -2.7590395199344857069 -0.44244973710299417835;-2.1127349202730116851 5.5918638143383319061 -6.0438874271272684524 -3.7335639504096320707 0.31834341527295517693 1.1706151684631940224;2.8368561345098965987 -0.49771438419175711987 0.52491191267784320651 -1.0685542866561528186 2.8852413368465019694 -2.8619139549849985649;-0.8242915076732412194 0.64582674995686295549 -0.42979652745443003292 0.25210520490746951561 3.5698641727013069591 1.9911970281454312026;-2.0634011886258378787 8.3434843712075839051 -2.0007497016259314648 1.6295398164578625 -0.98454709354952307798 -0.25721927165924757253;-1.848232394888253749 -1.4716516347505963491 -1.3292939270815964381 -0.0068733014709738970982 0.99927415399531593909 -3.2274319992641924415;-0.84329056644789257557 2.8445363120366673471 0.23736584567741600416 0.68579639402714631657 0.076598010004794964134 -8.6471805180671932334;1.0370746353446316235 1.6114374344848543252 -0.51362742419713858233 -1.3389386741160276273 0.3148355627863875239 -11.46023230894903655;-0.766245250476178974 1.3173892075959841019 -0.25286698167089349809 0.19158478418056640313 -1.2204765233469161423 2.1936935536727033558;2.2674682791565659024 0.30170143707803148692 1.8571462183766225262 -4.9259605273343245457 -0.66091042842273761693 -1.0200711308622194551;-2.7228785981867602572 0.11952505790288439624 0.44940639693687928213 -2.6648837853727656011 -2.9112585437758560225 0.33009919667161286005;3.4111978496525954263 -2.777042801172089348 1.0605060020879950589 0.54561134697303448338 3.6754340980554691676 2.1108307602898470634;2.1222268170349809502 2.8612186764780180859 1.6905709281586787096 -0.073775185972758922093 -1.6555263050819035708 0.063870022788762789712;1.5427749374037582619 0.68888049787276650626 1.0157967661879316879 -2.2272284873890972889 -2.8180592806449107357 0.508592518945108929;-0.52756420026079131613 -1.0407139963561986562 1.0430783184894809601 1.5065439217931000382 -1.7939284517267986008 1.201363084745367793;-0.75583050415932695465 -0.51531709965441863108 -1.8182774670870907041 0.76961814057617894402 -7.8121044790805616032 0.77125457418340759297;1.5179810121589851768 -1.3855001763101342238 -2.8594045957552616244 -1.4285740578959704727 -1.2104641395359845291 -2.2841875863906517807;0.049833566870039244789 -0.57901574468065175605 6.6856167490375124629 -2.1927972556172128371 -1.2097767671617618568 -0.547810519663194051;-0.46557001439888112682 -0.89875417139055246984 -0.97751976011303076675 -3.0908969759274333988 -2.0959530918340778527 0.091477728371840247301;-0.62540214554911255362 -0.61855682855503446582 0.87917825560545836971 -1.9443764331725519323 -2.0946350739037771227 1.1843955852866059342;0.78472801761902799544 1.3093196832609577118 1.1586544123389168615 -3.4027418964270599311 -0.24100273567613766934 -0.3088772619237441508;-1.9890301623423263244 -0.61301296379513081636 -1.1236446618056374902 -3.3585162098582332924 -1.3221390185429722219 -0.87684536074362140479;1.5058537993684786294 0.51757719913795552369 -1.4680560287039197132 0.9642304932581878818 -0.40210923057539194048 -2.1208564678637848999;-3.3287546121440052538 0.13947052406503590571 -2.6063531320432016258 -3.1203283379903341554 -0.78981156990717305 1.0953490130111671608;-0.22651887258635322597 -0.80523844324862836608 6.3487296326791131662 -1.0492212654214683187 2.1632641658920679362 -0.5756826041859449683;-0.49172629584032057082 -1.3166529861971103532 1.8352704995444790725 -0.051054380988311567902 -1.7955038915753134265 -1.572864390365496412;3.9835346442455685789 1.6660030830502556842 -0.58207574070829848356 4.864832913746341525 0.61309753724695792432 3.3700742480225165387;-1.0189335221073922977 0.036032528312850767294 -0.64491729070172509886 2.7509626526547297232 2.9524613023817249946 -0.84772907541615305504;0.55750473064034222759 0.49557927404993257214 -2.3520501974439884663 3.3215201405714269711 -0.91050493614951022447 -1.6443726528641020579;3.1856701892906418294 1.9684360408832501932 -0.25643335248724241637 1.1270878162116941823 -1.9504625509735045163 -0.11832255523880226555;-0.38915344906710935824 -1.3943258193925824884 6.0193749940800147513 1.333761570338028335 0.68723839924343166352 -2.5298800596399226848;-0.85594379864369840583 0.55069386351708238259 -1.0088421836252889907 -2.3878250475731941371 -0.7266254464021612014 2.7520560035357131135;-0.66914302637933897877 -2.9737462868337170008 -0.2206698663171606789 -0.2517888301461787548 2.1514589498597458395 2.2932206550040330484;0.87141696281026381765 -0.53139972158834114513 1.132821571559300855 0.263969503661083571 1.2078781048959392752 -1.4957084832292104615;-1.3945497018224302099 0.70635471977405406285 -0.64431066125816605084 0.8229066952829927617 -0.99350012704960322107 2.4580643747284418588;-5.413633706472716689 1.1202070809669593121 -0.5055578278464631925 2.0596210460130808251 1.926455123002805081 0.24063892734954717145;0.74124144983275164211 0.26929919733880658406 2.6626075968957225726 -0.006452797615286873234 0.79348358857494316609 -2.0860848498242217097;-1.4858939433896156679 -2.5691016070744114863 1.5079088895273125015 -4.0525056054030725861 -0.98474544277083564392 -0.43068650603416092082;-2.1902766975556886564 0.44299749303143670653 2.0145431538510076841 -0.0052992296915582480857 1.137792941041887218 -0.035779735746212390501;-3.8975541080616298295 -1.5875821386837760674 1.038867576258823533 0.63264657682521807658 -0.1368423559865596939 0.73805966931016264709;0.44577717732141958207 0.052302781327343304818 -0.98055380296975791499 2.589361394750532952 0.30960565581010857095 -1.3743474777179496282;1.3112224833907388799 1.7927525424074350902 -2.3429564243000657875 -0.7913700734298647621 0.44451538902476150916 0.43716344864257883351;0.56494612313434267037 -1.5789012899775309862 -2.1525387220230598473 -0.24753274228196051054 0.722390812937625304 0.98955504654200054926];

% Layer 2
b2 = [-0.67196186759081466544;0.20956172463003214235];
LW2_1 = [-1.2453985100906206362 0.36183682705530667567 -1.2201646742118350542 1.0600588976224110116 0.25292036192930222871 1.5392710541503962229 -1.0138846096853384449 0.48139947547652933713 -0.86973080593009943762 0.89415683694658087965 1.0270209117454964787 0.58934226795322630643 2.1798793458359488895 0.2561847212058134815 1.6113290577329841824 1.5957593897974944319 0.24115772668565846337 -1.1982293348350423479 0.43942993461971935343 0.65688086403656764656 -0.030503645499976902999 -2.2174278060102121657 -0.3764663314754037593 -0.6834719387342409469 0.90786401025323559821 -0.53843083060769569848 -0.41027994950372848049 0.019611422138884077732 -0.86333798272095041426 0.94929026990812492848 1.553036535906940907 0.66028598225451085035 -0.12423198115667055674 -0.90323260061334853521 -1.6482731689839478229 -1.3470276840648482963 1.3990940986216222619 0.10005993477679089865 -0.43902858661177773802 -0.53019366034949055866 -1.3283871502060420333 1.0640343249006289916 1.3692292001761843245 -0.75805142276077364105 -0.068503281712764318989 -1.6313262484168524757 0.59065653255193317772 -1.1694633383208010713 0.48884932274554315779 2.1335909675101722982 -1.0700815263417666756 0.52568120988039535035 -0.24982182719395842896 -0.5463335693258892789 1.8271912824284191057 -0.89820319242951129901 -1.0538708564066334716 -0.59710781017931380266 0.087704309427826573908 -0.051602472206155970691 -0.25083906407344463974 -0.27661096512421112781 -1.1412698663689666567 0.68936118715847927163 -0.51720533413865743544 -1.6290318222110140578 -1.3568961854590320115 0.61318401135026678883 1.4270210125070950102 0.35913184781947155022 1.5177047776126395551 0.052027632274698101811 -1.4209430352352561133 -0.68419079947792282859 1.5406664719389364659 1.9173466208871103866 -0.40335503261893040916 0.80686651522314745133 -1.3510725280421167493 1.0804983737871023397 0.018628731294470665669 -0.85312950866668135763 1.1742017131579096656 0.09335765200378534634 -1.8837790061097927641 -0.94240048424352262924 1.0447410589953489701 -0.47876107869009082441 0.91014224078645267202 0.64578935475297172264 0.021332475882397807648 -1.3445627420724832746 0.97050527205422787436 0.25087266519168638368 0.081664247080920321364 -1.8034311259058288801 1.498746940825875118 0.75326037080749763675 -0.18506722016940335696 -1.8750873914839489842;0.36553331680416034644 0.52743847942580923682 1.8808716336695516791 0.19447399927179989665 -1.3814157056586386929 -0.3945151252415143861 -0.75901157082033210433 0.27449223106121789506 0.43480681243631558175 0.37973052646590033099 1.4536496122799624775 0.71200615086595719916 -0.026315484438315946136 -1.1670675850024485598 -1.0437443835924367086 0.54163879435030504172 -0.16876172864874197654 1.069009499272078445 -2.0341424670087802085 1.0543432446888503229 0.689538810315569628 2.2143823912921423158 -0.04986542680640387859 -0.69980097943384067527 -1.4535733687677780956 -1.4492487838863350458 1.1949854762265488262 1.0176497362948080383 1.0491198247141648725 -0.33681739678291622297 -0.156289655322973009 -1.0552892106268529915 0.7175078083743563484 0.91064836795504644495 0.8157785770468938269 0.40848249228177840875 -0.75754073349343165056 -0.172035560443427743 0.52911196661167692046 -1.9149536602034549215 2.3419124939148989739 -1.3803092579674376417 0.4372908127287918334 -0.44496601889034892441 -0.73970485339834357585 1.5604102387089435755 -0.45351297780570032359 0.4750049033839810475 1.7677401163184236488 -1.2372545487735397973 0.42082440740310200766 0.36759750243455258101 -0.4077365150203304256 0.04057508153992227945 -0.46758413244378366214 1.098119570106864229 0.046516565101946821814 0.96574412724378566608 -0.61431381156194464488 0.73615869794402966075 1.0476296599020564759 -0.51455582269490918179 1.0732691809753596157 -0.82101349356968067461 1.0277932574738299909 2.4026776147293480435 0.34507520507509698016 0.73933320325231033365 -1.2853727004750108431 -0.75651075506249321201 -1.1321415033305868292 -1.2738170777345672047 1.3240728190772446116 0.37712640426352672662 0.56724400811848219028 -0.75319384051437066052 1.0102940809950611278 0.83184914305958246317 -0.49874972838432291011 0.88617674816664571136 0.97950492510922804179 0.49597601680503250465 -0.66595394310253552828 0.62343165492106067394 0.97902997851539896867 1.440725388714157118 -1.7952144304657342566 1.3130386978558890032 -0.97972133483776524532 -1.3798202568921544842 -0.14542826747915335583 -0.10258911316506998113 -1.2239062501530579841 -1.4171130882188012201 0.95970067025765903868 0.31059178158815042847 -0.88225990518072494595 0.86597076720013477225 -1.7035872034627645988 1.2499400335425263631];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.0800752584557887;0.0800122702550789];
y1_step1.xoffset = [10.0140650040367;10.0027948809821];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
    X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},1); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS
    
    % Input 1
    X{1,ts} = X{1,ts}';
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
    Y{1,ts} = Y{1,ts}';
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
    Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end
